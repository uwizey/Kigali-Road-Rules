<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="../css/admin-styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- HEADER -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <button class="mobile-menu-toggle" id="sidebar-toggle">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <h1 class="logo">Admin Panel</h1>
        </div>

        <nav class="links">
          <a href="#" data-section="overview">Overview</a>
          <a href="#" data-section="topics">Topics</a>
          <a href="#" data-section="questions">Questions</a>
          <a href="#" data-section="exams">Exams</a>
          <a href="#" data-section="users">Users</a>
          <a href="#" class="btn-logout" id="btn-logout">Logout</a>
        </nav>

        <button class="mobile-menu-toggle desktop-hide" id="mobile-menu-toggle">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </header>

    <!-- SIDEBAR OVERLAY -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- MAIN CONTAINER -->
    <div class="main-container">
      <!-- LEFT SIDEBAR -->
      <aside class="left-sidebar">
        <div class="sidebar-header">
          <h3>Navigation</h3>
        </div>

        <nav class="sidebar-nav">
          <button class="nav-item active" data-section="overview">
            <span class="icon"><i class="fas fa-chart-line"></i></span>
            <span>Overview</span>
          </button>
          <button class="nav-item" data-section="topics">
            <span class="icon"><i class="fas fa-book"></i></span>
            <span>Topics Management</span>
          </button>
          <button class="nav-item" data-section="questions">
            <span class="icon"><i class="fas fa-question-circle"></i></span>
            <span>Questions Bank</span>
          </button>
          <button class="nav-item" data-section="exams">
            <span class="icon"><i class="fas fa-file-alt"></i></span>
            <span>Exams Management</span>
          </button>
          <button class="nav-item" data-section="users">
            <span class="icon"><i class="fas fa-users"></i></span>
            <span>Users Management</span>
          </button>
        </nav>
      </aside>

      <!-- MAIN CONTENT -->
      <main class="content-area">
        <!-- OVERVIEW SECTION -->
        <section id="overview" class="admin-section active">
          <div class="section-header">
            <h2>Dashboard Overview</h2>
            <p>Welcome back! Here's what's happening with your platform.</p>
          </div>

          <!-- STATS CARDS -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon" style="background: #dbeafe">
                <i class="fas fa-book" style="color: #0097b2"></i>
              </div>
              <div class="stat-info">
                <h3>Total Topics</h3>
                <p class="stat-number" id="totalTopics">24</p>
                <span class="stat-change positive">+3 this month</span>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon" style="background: #fef3c7">
                <i class="fas fa-question-circle" style="color: #f59e0b"></i>
              </div>
              <div class="stat-info">
                <h3>Total Questions</h3>
                <p class="stat-number" id="totalQuestions">1,248</p>
                <span class="stat-change positive">+156 this month</span>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon" style="background: #ddd6fe">
                <i class="fas fa-users" style="color: #8b5cf6"></i>
              </div>
              <div class="stat-info">
                <h3>Active Users</h3>
                <p class="stat-number" id="totalUsers">3,542</p>
                <span class="stat-change positive">+289 this month</span>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon" style="background: #fecaca">
                <i class="fas fa-file-alt" style="color: #ef4444"></i>
              </div>
              <div class="stat-info">
                <h3>Tests Taken</h3>
                <p class="stat-number" id="totalTests">8,432</p>
                <span class="stat-change positive">+1,204 this month</span>
              </div>
            </div>
          </div>

          <!-- CHARTS -->
          <div class="charts-grid">
            <div class="chart-card">
              <h3>Questions by Topic</h3>
              <canvas id="questionsChart"></canvas>
            </div>

            <div class="chart-card">
              <h3>User Growth (Last 6 Months)</h3>
              <canvas id="usersChart"></canvas>
            </div>

            <div class="chart-card">
              <h3>Test Activity (Last 7 Days)</h3>
              <canvas id="activityChart"></canvas>
            </div>

            <div class="chart-card">
              <h3>Performance Metrics</h3>
              <canvas id="performanceChart"></canvas>
            </div>
          </div>
        </section>

        <!-- TOPICS SECTION -->
        <section id="topics" class="admin-section">
          <div class="section-header">
            <h2>Topics Management</h2>
            <button class="btn-primary" id="btn-add-topic">
              <i class="fas fa-plus"></i> Add New Topic
            </button>
          </div>

          <div class="topics-list" id="topicsList">
            <!-- Topics will be dynamically loaded here -->
          </div>
        </section>

        <!-- QUESTIONS SECTION -->
        <section id="questions" class="admin-section">
          <div class="section-header">
            <h2>Questions Bank</h2>
            <button class="btn-primary" id="btn-add-question">
              <i class="fas fa-plus"></i> Add New Question
            </button>
          </div>

          <div class="filter-bar">
            <select id="filterTopic" class="filter-select">
              <option value="">All Topics</option>
            </select>
            <input
              type="text"
              id="searchQuestion"
              class="search-input"
              placeholder="Search questions..."
            />
          </div>

          <div class="questions-table-container">
            <table class="data-table" id="questionsTable">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Question</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="questionsTableBody">
                <!-- Questions will be dynamically loaded here -->
              </tbody>
            </table>
          </div>
        </section>

        <!-- EXAMS SECTION -->
        <section id="exams" class="admin-section">
          <div class="section-header">
            <h2>Exams Management</h2>
            <button class="btn-primary" id="btn-add-exam">
              <i class="fas fa-plus"></i> Add New Exam
            </button>
          </div>

          <div class="exams-grid" id="examsList">
            <!-- Exams will be dynamically loaded here -->
          </div>
        </section>

        <!-- USERS SECTION -->
        <section id="users" class="admin-section">
          <div class="section-header">
            <h2>Users Management</h2>
            <button class="btn-primary" id="btn-add-user">
              <i class="fas fa-plus"></i> Add New User
            </button>
          </div>

          <div class="filter-bar">
            <select id="filterUserRole" class="filter-select">
              <option value="">All Roles</option>
              <option value="admin">Admin</option>
              <option value="user">User</option>
            </select>
            <input
              type="text"
              id="searchUser"
              class="search-input"
              placeholder="Search users..."
            />
          </div>

          <div class="users-table-container">
            <table class="data-table" id="usersTable">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="usersTableBody">
                <!-- Users will be dynamically loaded here -->
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <!-- TOPIC MODAL -->
    <div id="topicModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="topicModalTitle">Add New Topic</h3>
          <button class="close-btn" data-modal="topicModal">&times;</button>
        </div>
        <form id="topicForm">
          <input type="hidden" id="topicId" />

          <div class="form-group">
            <label>Topic Name *</label>
            <input
              type="text"
              id="topicName"
              required
              placeholder="Enter topic name"
            />
          </div>

          <div class="form-group">
            <label>Description</label>
            <textarea
              id="topicDescription"
              rows="3"
              placeholder="Enter topic description"
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-secondary" data-modal="topicModal">
              Cancel
            </button>
            <button type="submit" class="btn-primary">Save Topic</button>
          </div>
        </form>

        <!-- Subtopics Section (shown when editing) -->
        <div id="subtopicsSection" style="display: none">
          <hr style="margin: 20px 0" />
          <div class="subtopics-header">
            <h4>Subtopics</h4>
            <button type="button" class="btn-small" id="btn-add-subtopic-field">
              + Add Subtopic
            </button>
          </div>
          <div id="subtopicsList">
            <!-- Subtopics will be loaded here -->
          </div>
        </div>
      </div>
    </div>

    <!-- QUESTION MODAL -->
    <div id="questionModal" class="modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3 id="questionModalTitle">Add New Question</h3>
          <button class="close-btn" data-modal="questionModal">&times;</button>
        </div>
        <form id="questionForm">
          <input type="hidden" id="questionId" />

          <div class="form-group">
            <label>Question Statement *</label>
            <textarea
              id="questionStatement"
              rows="3"
              required
              placeholder="Enter your question here"
            ></textarea>
          </div>

          <div class="form-group">
            <label>Topic *</label>
            <select id="questionTopic" required>
              <option value="">Select a topic</option>
            </select>
          </div>

          <div class="form-group">
            <label>Question Image (Optional)</label>
            <input type="file" id="questionImage" accept="image/*" />
            <div id="imagePreview" class="image-preview"></div>
            <div id="removeImageContainer" style="display: none">
              <label>
                <input type="checkbox" id="removeImage" />
                Remove existing image
              </label>
            </div>
          </div>

          <div class="form-group">
            <label>Answer Options *</label>
            <div class="options-grid">
              <div class="option-item">
                <input
                  type="radio"
                  name="correctAnswer"
                  id="correctA"
                  value="A"
                  required
                />
                <label for="optionA">A:</label>
                <input
                  type="text"
                  id="optionA"
                  required
                  placeholder="Option A"
                />
              </div>
              <div class="option-item">
                <input
                  type="radio"
                  name="correctAnswer"
                  id="correctB"
                  value="B"
                />
                <label for="optionB">B:</label>
                <input
                  type="text"
                  id="optionB"
                  required
                  placeholder="Option B"
                />
              </div>
              <div class="option-item">
                <input
                  type="radio"
                  name="correctAnswer"
                  id="correctC"
                  value="C"
                />
                <label for="optionC">C:</label>
                <input
                  type="text"
                  id="optionC"
                  required
                  placeholder="Option C"
                />
              </div>
              <div class="option-item">
                <input
                  type="radio"
                  name="correctAnswer"
                  id="correctD"
                  value="D"
                />
                <label for="optionD">D:</label>
                <input
                  type="text"
                  id="optionD"
                  required
                  placeholder="Option D"
                />
              </div>
            </div>
            <p class="help-text">
              Select the radio button next to the correct answer
            </p>
          </div>

          <div class="form-actions">
            <button
              type="button"
              class="btn-secondary"
              data-modal="questionModal"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">Save Question</button>
          </div>
        </form>
      </div>
    </div>

    <!-- USER MODAL -->
    <div id="userModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="userModalTitle">Add New User</h3>
          <button class="close-btn" data-modal="userModal">&times;</button>
        </div>
        <form id="userForm">
          <input type="hidden" id="userId" />

          <div class="form-group">
            <label>Full Name *</label>
            <input
              type="text"
              id="userName"
              required
              placeholder="Enter full name"
            />
          </div>

          <div class="form-group">
            <label>Email *</label>
            <input
              type="email"
              id="userEmail"
              required
              placeholder="Enter email address"
            />
          </div>

          <div class="form-group">
            <label>Role *</label>
            <select id="userRole" required>
              <option value="">Select role</option>
              <option value="user">User</option>
              <option value="admin">Admin</option>
            </select>
          </div>

          <div class="form-group">
            <label>Password *</label>
            <input
              type="password"
              id="userPassword"
              placeholder="Enter password"
            />
            <p class="help-text" id="passwordHelp">
              Leave blank to keep current password
            </p>
          </div>

          <div class="form-group">
            <label>Status</label>
            <select id="userStatus">
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
              <option value="suspended">Suspended</option>
            </select>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-secondary" data-modal="userModal">
              Cancel
            </button>
            <button type="submit" class="btn-primary">Save User</button>
          </div>
        </form>
      </div>
    </div>

    <!-- SUBTOPIC EDIT MODAL -->
    <div id="subtopicModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="subtopicModalTitle">Edit Subtopic</h3>
          <button class="close-btn" data-modal="subtopicModal">&times;</button>
        </div>
        <form id="subtopicForm">
          <input type="hidden" id="subtopicTopicId" />
          <input type="hidden" id="subtopicId" />

          <div class="form-group">
            <label>Subtopic Name *</label>
            <input
              type="text"
              id="subtopicName"
              required
              placeholder="Enter subtopic name"
            />
          </div>

          <div class="form-actions">
            <button
              type="button"
              class="btn-secondary"
              data-modal="subtopicModal"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">
              <i class="fas fa-save"></i> Save Subtopic
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- EXAM MODAL -->
    <div id="examModal" class="modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3 id="examModalTitle">Add New Exam</h3>
          <button class="close-btn" data-modal="examModal">&times;</button>
        </div>
        <form id="examForm">
          <input type="hidden" id="examId" />

          <div class="form-group">
            <label>Exam Name *</label>
            <input
              type="text"
              id="examName"
              required
              placeholder="Enter exam name"
            />
          </div>

          <div class="form-group">
            <label>Description</label>
            <textarea
              id="examDescription"
              rows="3"
              placeholder="Enter exam description"
            ></textarea>
          </div>

          <div class="form-group">
            <label>Select Questions *</label>
            <p class="help-text">
              Choose questions from the available questions bank
            </p>

            <div class="questions-selector">
              <div class="selector-filters">
                <select id="examQuestionTopicFilter" class="filter-select">
                  <option value="">All Topics</option>
                </select>
                <input
                  type="text"
                  id="examQuestionSearch"
                  class="search-input"
                  placeholder="Search questions..."
                />
              </div>

              <div class="available-questions" id="availableQuestions">
                <!-- Available questions will be listed here -->
              </div>

              <div class="selected-questions-section">
                <h4>Selected Questions (<span id="selectedCount">0</span>)</h4>
                <div class="selected-questions" id="selectedQuestions">
                  <p class="no-selection">No questions selected yet</p>
                </div>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-secondary" data-modal="examModal">
              Cancel
            </button>
            <button type="submit" class="btn-primary">
              <i class="fas fa-save"></i> Save Exam
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="../js/admin-script.js" type="module"></script>
  </body>
</html>
